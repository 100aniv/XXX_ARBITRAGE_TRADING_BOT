# D73-4: Small-Scale Multi-Symbol Integration Test Configuration
# Top-10 심볼 PAPER 모드 통합 테스트 설정
#
# Purpose:
# - D73-1 (Symbol Universe) + D73-2 (Multi-Symbol Engine) + D73-3 (RiskGuard) 통합 검증
# - Top-10 심볼 대상 짧은 PAPER 캠페인 실행
# - 기능 검증 중심 (성능 튜닝은 D74에서)

# Environment
env: "development"

# Exchange Configuration (Paper Mode)
exchange:
  upbit_access_key: "paper_mock"
  upbit_secret_key: "paper_mock"
  binance_api_key: "paper_mock"
  binance_secret_key: "paper_mock"

# Database Configuration
database:
  postgres_host: "localhost"
  postgres_port: 5432
  postgres_dbname: "arbitrage_lite"
  postgres_user: "postgres"
  postgres_password: "postgres"
  redis_host: "localhost"
  redis_port: 6379
  redis_db: 0

# Risk Configuration (Single-Symbol 호환)
risk:
  max_notional_per_trade: 1000.0
  max_daily_loss: 5000.0
  max_open_trades: 10

# Trading Configuration
trading:
  min_spread_bps: 30.0  # 테스트에서 거래 발생 가능하도록 낮춤
  taker_fee_a_bps: 10.0
  taker_fee_b_bps: 10.0
  slippage_bps: 5.0
  max_position_usd: 1000.0
  close_on_spread_reversal: true

# Monitoring Configuration
monitoring:
  metrics_enabled: true
  metrics_interval_seconds: 60
  log_level: "INFO"

# Session Configuration
session:
  mode: "paper"
  data_source: "paper"
  max_runtime_seconds: 120  # 2분 테스트 (D73-4: 짧은 캠페인)
  loop_interval_ms: 500  # 0.5초 interval (테스트 가속)
  state_persistence_enabled: false  # 테스트에서는 비활성화
  snapshot_interval_seconds: 300

# D73-1: Symbol Universe Configuration
universe:
  mode: "TOP_N"
  top_n: 10  # Top-10 심볼
  base_quote: "USDT"
  blacklist: []
  min_24h_quote_volume: 0.0  # 테스트에서는 필터 없음 (DummySource 사용)

# D73-2: Engine Configuration
engine:
  mode: "multi"  # Multi-Symbol 모드
  multi_symbol_enabled: true
  per_symbol_isolation: true

# D73-3: Multi-Symbol RiskGuard Configuration
multi_symbol_risk_guard:
  # Global Guard
  max_total_exposure_usd: 10000.0
  max_daily_loss_usd: 1000.0
  emergency_stop_loss_usd: 2000.0
  
  # Portfolio Guard
  total_capital_usd: 10000.0
  max_symbol_allocation_pct: 0.30  # 심볼당 최대 30%
  
  # Symbol Guard (공통 설정)
  max_position_size_usd: 1000.0
  max_position_count: 2  # 심볼당 최대 2 포지션
  cooldown_seconds: 30.0  # 짧게 설정 (테스트 가속)
  max_symbol_daily_loss_usd: 500.0
  circuit_breaker_loss_count: 3
  circuit_breaker_duration: 120.0  # 2분 차단

# D73-4 Specific Settings
d73_4_test:
  max_iterations_per_symbol: 50  # 심볼당 최대 50 iteration
  campaign_duration_seconds: 120  # 2분 캠페인
  enable_verbose_logging: true
