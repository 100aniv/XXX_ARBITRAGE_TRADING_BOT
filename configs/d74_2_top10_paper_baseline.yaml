# D74-2: Real Multi-Symbol PAPER Baseline Configuration
# Top-10 심볼 실제 PAPER 캠페인 (10~15분) - 베이스라인 측정용
#
# Purpose:
# - D73-4는 짧은 스모크 테스트였음 (2분, 구조 검증만)
# - D74-2는 실제 멀티심볼 PAPER 베이스라인 검증:
#   * 여러 심볼에서 실제 체결 발생 (최소 3개 이상)
#   * RiskGuard/Portfolio 정상 동작 확인
#   * 베이스라인 성능 수치 측정 (loop latency, throughput)
#   * D74-3 최적화 전 비교 기준 확보
#
# Key Differences from D73-4:
# - Duration: 2분 → 10분 (실제 캠페인 수준)
# - RiskGuard: 완화하여 실제 체결 유도
# - Logging: 상세 로깅으로 분석 가능하게
# - Stablecoins: Blacklist (BUSD, USDC, TUSD 등 제외)

# Environment
env: "development"

# Exchange Configuration (Paper Mode)
exchange:
  upbit_access_key: "paper_mock"
  upbit_secret_key: "paper_mock"
  binance_api_key: "paper_mock"
  binance_secret_key: "paper_mock"

# Database Configuration
database:
  postgres_host: "localhost"
  postgres_port: 5432
  postgres_dbname: "arbitrage_lite"
  postgres_user: "postgres"
  postgres_password: "postgres"
  redis_host: "localhost"
  redis_port: 6380  # arbitrage-redis 포트
  redis_db: 0

# Risk Configuration (Single-Symbol 호환)
risk:
  max_notional_per_trade: 2000.0  # D73-4 대비 2배 (체결 유도)
  max_daily_loss: 10000.0  # 충분히 여유있게
  max_open_trades: 20  # 멀티심볼이므로 충분히

# Trading Configuration
trading:
  min_spread_bps: 40.0  # validation: > 1.5 * (fees + slippage) = 37.5
  taker_fee_a_bps: 10.0
  taker_fee_b_bps: 10.0
  slippage_bps: 5.0
  close_on_spread_reversal: true

# Monitoring Configuration
monitoring:
  metrics_enabled: true
  metrics_interval_seconds: 60
  log_level: "INFO"  # 상세 로깅

# Session Configuration
session:
  mode: "paper"
  data_source: "paper"
  max_runtime_seconds: 600  # 10분 캠페인 (D74-2 baseline)
  loop_interval_ms: 100  # 0.1초 (D74-1 기준과 동일)
  state_persistence_enabled: false  # 테스트에서는 비활성화
  snapshot_interval_seconds: 300

# D73-1: Symbol Universe Configuration
universe:
  mode: "TOP_N"
  top_n: 10  # Top-10 심볼 (20은 너무 무거울 수 있음)
  base_quote: "USDT"
  blacklist: ["BUSDUSDT", "USDCUSDT", "TUSDUSDT", "USDPUSDT"]  # Stablecoin 제외
  min_24h_quote_volume: 0.0  # DummySource 사용

# D73-2: Engine Configuration
engine:
  mode: "multi"  # Multi-Symbol 모드
  multi_symbol_enabled: true
  per_symbol_isolation: true

# D73-3: Multi-Symbol RiskGuard Configuration
# D73-4 대비 완화하여 실제 체결 유도
multi_symbol_risk_guard:
  # Global Guard (완화)
  max_total_exposure_usd: 20000.0  # D73-4(10000) 대비 2배
  max_daily_loss_usd: 5000.0  # D73-4(1000) 대비 5배
  emergency_stop_loss_usd: 10000.0  # D73-4(2000) 대비 5배
  
  # Portfolio Guard (완화)
  total_capital_usd: 20000.0  # D73-4(10000) 대비 2배
  max_symbol_allocation_pct: 0.40  # D73-4(0.30) 대비 완화 → 심볼당 40%
  
  # Symbol Guard (완화)
  max_position_size_usd: 2000.0  # D73-4(1000) 대비 2배
  max_position_count: 3  # D73-4(2) 대비 증가 → 심볼당 3 포지션
  cooldown_seconds: 20.0  # D73-4(30) 대비 단축 → 빠른 재진입
  max_symbol_daily_loss_usd: 1000.0  # D73-4(500) 대비 2배
  circuit_breaker_loss_count: 5  # D73-4(3) 대비 완화 → 5회 연속 손실
  circuit_breaker_duration: 120.0  # 2분 차단

# D74-2 Specific Settings
d74_2_baseline:
  campaign_duration_seconds: 600  # 10분 캠페인
  target_min_traded_symbols: 3  # 최소 3개 심볼에서 체결 목표
  target_min_total_trades: 10  # 최소 10건 체결 목표
  enable_performance_metrics: true  # 성능 측정 활성화
  enable_detailed_logging: true  # 상세 로깅
