# D74-2.5: Extended Multi-Symbol PAPER Soak Test Configuration
# Top-10 심볼 60분 PAPER soak 캠페인 - 롱 런 베이스라인 측정용
#
# Purpose:
# - D74-2(10분 baseline)를 시간 연장하여 "롱 런 멀티심볼 동작 안정성" 검증
# - D74-3 성능 최적화 이후에도 비교할 수 있는 60분 soak 베이스라인 확보
# - 더 큰 표본(거래 수/심볼 분포/스프레드 패턴) 수집
#
# Key Differences from D74-2:
# - Duration: 10분 → 60분 (6배 연장, soak test)
# - Expected trades: ~400 → ~2,400 (심볼당 ~240건)
# - Acceptance criteria: ≥2,000 filled orders, ≥20 traded symbols (KRW+USDT)
#
# Important:
# - D74-2.5는 D74-2와 D74-3 사이에 삽입되는 추가 단계
# - D74-3 최적화 목표(<10ms loop latency)는 변경 없음
# - 엔진/로직 변경 없이 "런타임 + 샘플 수 확대 + 모니터링 강화"만 수행

# Environment
env: "development"

# Exchange Configuration (Paper Mode)
exchange:
  upbit_access_key: "paper_mock"
  upbit_secret_key: "paper_mock"
  binance_api_key: "paper_mock"
  binance_secret_key: "paper_mock"

# Database Configuration
database:
  postgres_host: "localhost"
  postgres_port: 5432
  postgres_dbname: "arbitrage_lite"
  postgres_user: "postgres"
  postgres_password: "postgres"
  redis_host: "localhost"
  redis_port: 6380  # arbitrage-redis 포트
  redis_db: 0

# Risk Configuration (Single-Symbol 호환) - D74-2와 동일
risk:
  max_notional_per_trade: 2000.0  # D73-4 대비 2배 (체결 유도)
  max_daily_loss: 10000.0  # 충분히 여유있게
  max_open_trades: 1000  # D74-3: Increased for soak test

# Trading Configuration - D74-2와 동일
trading:
  min_spread_bps: 40.0  # validation: > 1.5 * (fees + slippage) = 37.5
  taker_fee_a_bps: 10.0
  taker_fee_b_bps: 10.0
  slippage_bps: 5.0
  close_on_spread_reversal: true

# Monitoring Configuration
monitoring:
  metrics_enabled: true
  metrics_interval_seconds: 60
  log_level: "INFO"  # 상세 로깅

# Session Configuration
session:
  mode: "paper"
  data_source: "paper"
  max_runtime_seconds: 3600  # 60분 soak 캠페인 (D74-2.5)
  loop_interval_ms: 100  # 0.1초 (D74-1 기준과 동일)
  state_persistence_enabled: false  # 테스트에서는 비활성화
  snapshot_interval_seconds: 300

# D73-1: Symbol Universe Configuration - D74-2와 동일
universe:
  mode: "TOP_N"
  top_n: 10  # Top-10 심볼
  base_quote: "USDT"
  blacklist: ["BUSDUSDT", "USDCUSDT", "TUSDUSDT", "USDPUSDT"]  # Stablecoin 제외
  min_24h_quote_volume: 0.0  # DummySource 사용

# D73-2: Engine Configuration - D74-2와 동일
engine:
  mode: "multi"  # Multi-Symbol 모드
  multi_symbol_enabled: true
  per_symbol_isolation: true

# D73-3: Multi-Symbol RiskGuard Configuration - D74-2와 동일
multi_symbol_risk_guard:
  # Global Guard (완화)
  max_total_exposure_usd: 20000.0  # D73-4(10000) 대비 2배
  max_daily_loss_usd: 5000.0  # D73-4(1000) 대비 5배
  emergency_stop_loss_usd: 10000.0  # D73-4(2000) 대비 5배
  
  # Portfolio Guard (완화)
  total_capital_usd: 20000.0  # D73-4(10000) 대비 2배
  max_symbol_allocation_pct: 0.40  # D73-4(0.30) 대비 완화 → 심볼당 40%
  
  # Symbol Guard (완화)
  max_position_size_usd: 2000.0  # D73-4(1000) 대비 2배
  max_position_count: 3  # D73-4(2) 대비 증가 → 심볼당 3 포지션
  cooldown_seconds: 20.0  # D73-4(30) 대비 단축 → 빠른 재진입
  max_symbol_daily_loss_usd: 1000.0  # D73-4(500) 대비 2배
  circuit_breaker_loss_count: 5  # D73-4(3) 대비 완화 → 5회 연속 손실
  circuit_breaker_duration: 120.0  # 2분 차단

# D74-2.5 Specific Settings
d74_2_5_soak:
  campaign_duration_seconds: 3600  # 60분 soak 캠페인
  target_min_traded_symbols: 20  # 최소 20개 심볼 (KRW+USDT 합산)
  target_min_total_trades: 2000  # 최소 2,000건 체결 목표
  runtime_tolerance_pct: 2.0  # Duration ±2% 허용
  enable_performance_metrics: true  # 성능 측정 활성화
  enable_detailed_logging: true  # 상세 로깅
  enable_risk_guard_monitoring: true  # RiskGuard decision 추적
