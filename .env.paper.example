# =============================================================================
# D78-0: Paper Trading Environment
# =============================================================================
#
# ⚠️  CRITICAL: REAL MARKET DATA + PAPER TRADING MODE
#
# Usage:
#   1. Copy this file to .env.paper
#   2. Set ARBITRAGE_ENV=paper
#   3. Fill in ALL required credentials
#
# Requirements:
#   - Real Upbit/Binance API keys (for market data)
#   - Telegram bot (for alerts)
#   - PostgreSQL/Redis (for state persistence)
#
# Validation:
#   - Strict validation enabled
#   - Missing credentials will cause startup failure
#
# =============================================================================

# Environment
ARBITRAGE_ENV=paper

# -----------------------------------------------------------------------------
# Exchange APIs - REQUIRED
# -----------------------------------------------------------------------------
# ⚠️  Use READ-ONLY API keys or API keys with TRADING DISABLED
# These are used to fetch market data for paper trading

# Upbit
UPBIT_ACCESS_KEY=GFhjpJxOyaU6nOB1N3OLfr1mXW4eI3kgxYxacSEx
UPBIT_SECRET_KEY=4I4qf0eb0szXlXNu8Hm59oP3z8L8FlpBIICfFKqi

# Binance
BINANCE_API_KEY=qfU82hiGfFiXqzxO0xTG9lCyzmQyEkTB8J9TbeLFJW6mNPNwJSnQxbts5wUXTfuo
BINANCE_API_SECRET=nnOWcKcmZSsRedwhwQcAWFU8xNcOoy6sUhwkLt1EDAoajWQmlWHr2fmTSSljOXjY

# -----------------------------------------------------------------------------
# Telegram Bot - REQUIRED (for production alerts)
# -----------------------------------------------------------------------------
TELEGRAM_BOT_TOKEN=7734510288:AAHjUXsA4jys2hYIr03qhOf7dE0cyMe6SLM
TELEGRAM_CHAT_ID=-453694961

# -----------------------------------------------------------------------------
# PostgreSQL - REQUIRED (for state persistence)
# -----------------------------------------------------------------------------
# Option 1: Full DSN (recommended)
POSTGRES_DSN=postgresql://arbitrage_user:arbitrage_pass@localhost:5432/arbitrage_db

# Option 2: Individual parameters
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=arbitrage
# POSTGRES_USER=arbitrage
# POSTGRES_PASSWORD=arbitrage

# -----------------------------------------------------------------------------
# Redis - REQUIRED (for caching & state)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0

# Or individual parameters
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_DB=0

# -----------------------------------------------------------------------------
# Email (Optional - for daily reports)
# -----------------------------------------------------------------------------
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_specific_password
# SMTP_USE_TLS=true

# -----------------------------------------------------------------------------
# Slack (Optional - for additional alerts)
# -----------------------------------------------------------------------------
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# -----------------------------------------------------------------------------
# Monitoring
# -----------------------------------------------------------------------------
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9100
GRAFANA_ENABLED=true

# -----------------------------------------------------------------------------
# D81-0: Fill Model Configuration
# -----------------------------------------------------------------------------
# Realistic fill & slippage modeling for PAPER mode
# ⚠️  Enable this to break the 100% win rate structure
FILL_MODEL_ENABLE=true
FILL_MODEL_PARTIAL_ENABLE=true
FILL_MODEL_SLIPPAGE_ENABLE=true
FILL_MODEL_SLIPPAGE_ALPHA=0.0001  # 0.01% per unit impact (conservative)
FILL_MODEL_TYPE=simple  # simple|advanced (D81-1+)
FILL_MODEL_AVAILABLE_VOLUME_FACTOR=2.0  # Conservative orderbook depth estimate

# -----------------------------------------------------------------------------
# D82-2/D82-3: TopN Selection Configuration (Hybrid Mode)
# -----------------------------------------------------------------------------
# Separates data sources for TopN selection (slow, cached) vs Entry/Exit (fast, real-time)
TOPN_SELECTION_DATA_SOURCE=mock  # "mock" | "real" - TopN selection data source (default: mock for rate limit safety)
TOPN_SELECTION_CACHE_TTL_SEC=600  # TopN cache TTL in seconds (default: 600 = 10 minutes)
TOPN_SELECTION_MAX_SYMBOLS=50  # Maximum symbols to select in TopN (default: 50)
TOPN_ENTRY_EXIT_DATA_SOURCE=real  # "mock" | "real" - Entry/Exit spread data source (default: real)

# D82-3: Real Selection Rate Limit Options (for when TOPN_SELECTION_DATA_SOURCE=real)
TOPN_SELECTION_RATE_LIMIT_ENABLED=true  # Enable rate limiting for real selection (default: true)
TOPN_SELECTION_BATCH_SIZE=10  # Number of symbols to process per batch (default: 10)
TOPN_SELECTION_BATCH_DELAY_SEC=1.5  # Delay between batches in seconds (default: 1.5)

# -----------------------------------------------------------------------------
# D82-1: TopN Real Market Entry/Exit Configuration
# -----------------------------------------------------------------------------
# Real spread-based Entry/Exit conditions for TopN PAPER mode
TOPN_ENTRY_MIN_SPREAD_BPS=1.0  # Minimum spread for Entry (1 bps = 0.01%) - very low for D82-2 testing
TOPN_ENTRY_MAX_CONCURRENT_POSITIONS=5  # Max concurrent open positions - reduced for rate limit
TOPN_EXIT_TP_SPREAD_BPS=2.0  # Take Profit spread (2 bps = 0.02%)
TOPN_EXIT_SL_SPREAD_BPS=50.0  # Stop Loss spread (50 bps = 0.5%)
TOPN_MAX_HOLDING_SECONDS=180.0  # Max holding time (180s = 3 minutes)

# -----------------------------------------------------------------------------
# Backward Compatibility
# -----------------------------------------------------------------------------
APP_ENV=staging
