-- ============================================================================
-- V2 Schema Rollback Script
-- ============================================================================
-- 목적: v2_schema.sql 실행 취소 (개발/테스트 환경 전용)
-- 경고: 운영 환경에서는 절대 실행하지 말 것
-- 실행: psql -U arbitrage -d arbitrage -f db/migrations/v2_schema_rollback.sql

-- ============================================================================
-- 뷰 삭제
-- ============================================================================

DROP VIEW IF EXISTS v2_recent_trades CASCADE;

-- ============================================================================
-- 테이블 삭제 (역순)
-- ============================================================================

DROP TABLE IF EXISTS v2_pnl_daily CASCADE;
DROP TABLE IF EXISTS v2_ledger CASCADE;
DROP TABLE IF EXISTS v2_trades CASCADE;
DROP TABLE IF EXISTS v2_fills CASCADE;
DROP TABLE IF EXISTS v2_orders CASCADE;

-- ============================================================================
-- 완료
-- ============================================================================

\echo 'V2 Schema Rollback 완료'
\echo '주의: 모든 V2 데이터가 삭제되었습니다'
