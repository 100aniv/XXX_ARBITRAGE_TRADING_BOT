# Windsurf RULES for Arbitrage Bot Project

## 0. 기본 원칙
- 기존 코드/구조/문서를 절대 파괴하지 않는다.
- 변경 시 반드시 patch 방식으로 부분 수정한다.
- 항상 PHASE MASTER 문서 기준으로만 작업한다.
- PHASE 범위를 벗어난 수정은 즉시 거부한다.

## 1. PHASE 기반 개발 룰
- PHASE 목록: A / B / C / D / E
- PHASE 인덱스는 docs/ARB_PHASE_INDEX.md 에 존재한다.
- active_phase 값만 읽고 그 PHASE의 master 문서에 정의된 스코프 내에서만 작업한다.
- 각 PHASE는 다음 문서를 가진다:
  - docs/phase_A_master.md
  - docs/phase_B_master.md
  - docs/phase_C_master.md
  - docs/phase_D_master.md
  - docs/phase_E_master.md

## 2. 파일 수정 RULES
- 전체 파일 rewrite 금지.
- 반드시 아래 포맷의 patch만 사용:
  ### 수정할 파일: xxx.py
  ### 변경 이유: …
  ### 패치:
  ```python
  --- old ---
  line1
  --- new ---
  line1 modified
  ```

## 3. 아키텍처 RULES
- risk.py → 리스크 로직만
- executor.py → 포지션/주문 실행만
- storage.py → 저장만
- normalizer.py → 정규화만
- engine.py → 스프레드/시그널 로직만
- config는 YAML에서만 관리하고 코드에 상수 하드코딩 금지

## 4. 출력 RULES
모든 답변은 반드시 아래 4항을 포함한다:
1. 수정된 파일 목록
2. 각 파일의 변경 블록
3. 전체 patch 코드
4. 실행/검증 방법 안내

## 5. 금칙 사항
- 임의 파일 삭제 금지
- 전체 리팩토링 금지
- 구조 파괴 금지
- 사용자의 명령 없이 새로운 모듈 생성 금지
- “코드를 실행할 수 없다” 같은 말 금지 (시뮬레이션 방식 사용)

## 6. Windsurf의 역할
- 개발 엔지니어
- 패치 기반 코드 수정자
- PHASE 범위 감시자
- 문서 자동 보완자
