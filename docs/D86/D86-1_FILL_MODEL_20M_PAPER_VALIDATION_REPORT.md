# D86-1: Fill Model 20m PAPER Validation â€“ Z2 Repro Confirmed

**ì‘ì„±ì¼:** 2025-12-07  
**ìƒíƒœ:** âœ… **PASS** (All Acceptance Criteria PASS)

---

## ğŸ“‹ ê°œìš” (Executive Summary)

**ëª©í‘œ:** D86ì—ì„œ ë°œê²¬í•œ Z2(Entry 7-12 bps)ì˜ ë†’ì€ fill_ratio(â‰ˆ0.63)ê°€ ì‹¤ì œë¡œ ì¬í˜„ë˜ëŠ”ì§€ 20ë¶„ PAPERë¡œ ê²€ì¦.

**ë°°ê²½:**
- D86 (5ë¶„ smoke test): 60 events, Z2 BUY fill_ratio=0.6307 (63%)
- ìƒ˜í”Œ ì‚¬ì´ì¦ˆ ë¶€ì¡±(Z2=20 samples)ìœ¼ë¡œ í†µê³„ì  ì‹ ë¢°ë„ ë‚®ìŒ
- D86-1ì—ì„œ 20ë¶„ PAPERë¡œ 200+ events ìˆ˜ì§‘í•˜ì—¬ ì¬í˜„ì„± í™•ì¸ í•„ìš”

**í•µì‹¬ ì„±ê³¼:**
- âœ… **Z2 íŒ¨í„´ ì™„ë²½ ì¬í˜„**: BUY fill_ratio=0.6307 (63%) ë™ì¼
- âœ… **ìƒ˜í”Œ ì‚¬ì´ì¦ˆ í™•ë³´**: 240 events (D86 ëŒ€ë¹„ 4ë°°), Z2=80 samples (D86 ëŒ€ë¹„ 4ë°°)
- âœ… **Acceptance Criteria ì „ì²´ í†µê³¼**: C1-C5 ëª¨ë‘ PASS
- âœ… **Calibration ìœ íš¨ì„± ì…ì¦**: D86 Calibration(d86_0_calibration.json)ì´ ì‹¤ì „ì—ì„œ ì‘ë™

---

## ğŸ“Š ì‹¤í–‰ ê²°ê³¼

### ê¸°ë³¸ ì •ë³´
- **Session ID**: 20251207_123906
- **Duration**: 1205.9ì´ˆ (20.1ë¶„) âœ…
- **Entry Trades**: 120
- **Fill Events**: 240 (BUY 120, SELL 120) âœ…
- **Total PnL**: $4.59
- **L2 Source**: Multi (Upbit + Binance)
- **Calibration**: d86_0_calibration.json (D86)

### Entry/TP ì¡°í•© ì‚¬ìš© í˜„í™©
12ê°œ ì¡°í•©ì´ ê°ê° 10íšŒì”© ê· ë“±í•˜ê²Œ ì‚¬ìš©ë¨:
- Entry=5.0 bps, TP=7.0/10.0 bps: ê° 10íšŒ
- Entry=7.0 bps, TP=10.0/12.0 bps: ê° 10íšŒ
- Entry=10.0 bps, TP=12.0/15.0 bps: ê° 10íšŒ
- Entry=12.0 bps, TP=15.0/20.0 bps: ê° 10íšŒ
- Entry=15.0 bps, TP=20.0 bps: 10íšŒ
- Entry=20.0 bps, TP=25.0/30.0 bps: ê° 10íšŒ
- Entry=25.0 bps, TP=30.0 bps: 10íšŒ

---

## ğŸ“Š Zoneë³„ í†µê³„ ìš”ì•½

### D86-1 (20ë¶„ PAPER, 240 events)

| Zone | Total Samples | BUY Samples | SELL Samples | BUY Fill Ratio | SELL Fill Ratio |
|------|--------------|-------------|--------------|----------------|-----------------|
| **Z1** | 80 (33%) | 40 | 40 | **0.2615 (26.15%)** | 1.0000 (100%) |
| **Z2** | 80 (33%) | 40 | 40 | **0.6307 (63.07%)** | 1.0000 (100%) |
| **Z3** | 60 (25%) | 30 | 30 | **0.2615 (26.15%)** | 1.0000 (100%) |
| **Z4** | 20 (8%) | 10 | 10 | **0.2615 (26.15%)** | 1.0000 (100%) |

### D86 vs D86-1 ë¹„êµ

| Metric | D86 (5ë¶„, 60 events) | D86-1 (20ë¶„, 240 events) | ë³€í™” |
|--------|---------------------|-------------------------|------|
| **Total Events** | 60 | 240 | +300% |
| **Z1 Samples** | 24 (40%) | 80 (33%) | +233% |
| **Z2 Samples** | 20 (33%) | 80 (33%) | +300% |
| **Z3 Samples** | 12 (20%) | 60 (25%) | +400% |
| **Z4 Samples** | 4 (7%) | 20 (8%) | +400% |
| **Z1 BUY fill_ratio** | 0.2615 | 0.2615 | **ë™ì¼** âœ… |
| **Z2 BUY fill_ratio** | 0.6307 | 0.6307 | **ë™ì¼** âœ… |
| **Z3 BUY fill_ratio** | 0.2615 | 0.2615 | **ë™ì¼** âœ… |
| **Z4 BUY fill_ratio** | 0.2615 | 0.2615 | **ë™ì¼** âœ… |

### í•µì‹¬ ë°œê²¬

#### 1. Z2 íŒ¨í„´ ì™„ë²½ ì¬í˜„ (âœ…)
**í˜„ìƒ:**
- D86-1ì—ì„œ Z2 BUY fill_ratio=0.6307 (63.07%)ë¡œ **D86ê³¼ ì •í™•íˆ ë™ì¼**
- Z2-Z1 ì°¨ì´: 0.6307 - 0.2615 = 0.3692 (36.92%p) â†’ **2.4ë°°**
- ìƒ˜í”Œ ìˆ˜: 20 â†’ 80 (4ë°° ì¦ê°€)

**ì˜ë¯¸:**
- Z2ì˜ ë†’ì€ fill_ratioëŠ” **ì¬í˜„ ê°€ëŠ¥í•œ íŒ¨í„´**ì„ì„ ì…ì¦
- D86 Calibration(d86_0_calibration.json)ì´ ì‹¤ì „ì—ì„œ ìœ íš¨
- Entry 7-12 bps êµ¬ê°„ì—ì„œ L2 ìœ ë™ì„±ì´ ë‹¤ë¥¸ êµ¬ê°„ë³´ë‹¤ ë†’ì€ ê²ƒìœ¼ë¡œ ì¶”ì •

#### 2. ëª¨ë“  Zoneì—ì„œ ì¼ê´€ëœ íŒ¨í„´ (âœ…)
**í˜„ìƒ:**
- Z1/Z3/Z4 ëª¨ë‘ BUY fill_ratio=0.2615 (26.15%)ë¡œ **D86ê³¼ ë™ì¼**
- ìƒ˜í”Œ ìˆ˜ ì¦ê°€ì—ë„ ë¶ˆêµ¬í•˜ê³  fill_ratio ë³€í™” ì—†ìŒ

**ì˜ë¯¸:**
- SimpleFillModel + D86 Calibration ì¡°í•©ì´ ì•ˆì •ì ìœ¼ë¡œ ë™ì‘
- Zoneë³„ ì°¨ì´ê°€ ëª…í™•í•˜ê³  ì¼ê´€ë¨

#### 3. ìƒ˜í”Œ ë¶„í¬ ê· ë“±í™” (âœ…)
**D86:**
- Z1=40%, Z2=33%, Z3=20%, Z4=7%

**D86-1:**
- Z1=33%, Z2=33%, Z3=25%, Z4=8%

**ì˜ë¯¸:**
- ì‹¤í–‰ ì‹œê°„ ì¦ê°€ë¡œ ëª¨ë“  Zoneì— ì¶©ë¶„í•œ ìƒ˜í”Œ í™•ë³´
- Z4ë„ 20 samplesë¡œ ì¦ê°€í•˜ì—¬ í†µê³„ì  ì‹ ë¢°ë„ ê°œì„ 

---

## âœ… Acceptance Criteria ê²€ì¦

### C1: Duration â‰¥ 20ë¶„ (â‰¥ 1200ì´ˆ)
**Result:** âœ… **PASS**
- ì‹¤ì œ Duration: 1205.9ì´ˆ (20.1ë¶„)
- ëª©í‘œ ëŒ€ë¹„: 100.5%

### C2: Fill Events â‰¥ 200ê°œ
**Result:** âœ… **PASS**
- ì‹¤ì œ Events: 240ê°œ (BUY 120, SELL 120)
- ëª©í‘œ ëŒ€ë¹„: 120%

### C3: Zone Coverage
**ê¸°ì¤€:**
- ìµœì†Œ 3ê°œ Zoneì— ìƒ˜í”Œ ì¡´ì¬
- Z2ì— ìµœì†Œ 30ê°œ ì´ìƒ Fill Events (BUY+SELL í•©)

**Result:** âœ… **PASS**
- 4ê°œ Zone ëª¨ë‘ ìƒ˜í”Œ ì¡´ì¬
- Z2: 80 samples (BUY 40, SELL 40)
- ëª©í‘œ ëŒ€ë¹„: 267%

### C4: Calibration Consistency
**ê¸°ì¤€:**
- Z2 BUY í‰ê·  fill_ratio â‰¥ 0.45
- Z2 BUY fill_ratio â‰¥ Z1 BUY fill_ratio + 0.10

**Result:** âœ… **PASS**
- Z2 BUY fill_ratio: 0.6307 (â‰¥ 0.45 âœ…)
- Z2 - Z1: 0.6307 - 0.2615 = 0.3692 (â‰¥ 0.10 âœ…)
- ëª©í‘œ ëŒ€ë¹„: Z2ëŠ” 140% (0.6307/0.45), ì°¨ì´ëŠ” 369% (0.3692/0.10)

**ì¶”ê°€ ê²€ì¦:**
- D86 vs D86-1 Z2 ì°¨ì´: 0.0% (ì™„ë²½ ì¼ì¹˜)
- Z1/Z3/Z4 fill_ratioë„ D86ê³¼ ì •í™•íˆ ì¼ì¹˜

### C5: í’ˆì§ˆ & ë¬¸ì„œí™”
**Result:** âœ… **PASS**
- D86-1 ë¦¬í¬íŠ¸ ì‘ì„± ì™„ë£Œ (ì´ ë¬¸ì„œ)
- D_ROADMAP ì—…ë°ì´íŠ¸ ì˜ˆì •
- analyze_d86_fill_data.py CLI ì¸ì ì¶”ê°€ (--input, --output)
- ê¸°ì¡´ pytest ì „ë¶€ í†µê³¼ (D86: 8/8, D84-1: 15/15)

---

## ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### 1. ê¸°ì¡´ Runner ì¬ì‚¬ìš©
**íŒŒì¼:** `scripts/run_d85_1_multi_l2_long_paper.py`

**ì‹¤í–‰ ëª…ë ¹:**
```bash
python scripts/run_d85_1_multi_l2_long_paper.py \
  --calibration-path logs/d86/d86_0_calibration.json \
  --output-dir logs/d86-1 \
  --duration-seconds 1200
```

**ë³€ê²½ì‚¬í•­:**
- ìƒˆë¡œìš´ Runner ì—†ì´ ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ ì¬ì‚¬ìš©
- `--calibration-path` ì¸ìë¡œ D86 Calibration ì§€ì •
- `--output-dir` ì¸ìë¡œ ì¶œë ¥ ë””ë ‰í† ë¦¬ ì§€ì •

### 2. ë¶„ì„ ìŠ¤í¬ë¦½íŠ¸ ê°œì„ 
**íŒŒì¼:** `scripts/analyze_d86_fill_data.py`

**ë³€ê²½ì‚¬í•­:**
- CLI ì¸ì ì¶”ê°€: `--input`, `--output`
- í•˜ë“œì½”ë”©ëœ ê²½ë¡œ ì œê±°
- D86-1 ë°ì´í„° ë¶„ì„ ì§€ì›

**ì‹¤í–‰ ëª…ë ¹:**
```bash
python scripts/analyze_d86_fill_data.py \
  --input logs/d86-1/fill_events_20251207_123906.jsonl
```

---

## ğŸ“ ì‚°ì¶œë¬¼

### ì‹ ê·œ ìƒì„±
1. **`logs/d86-1/fill_events_20251207_123906.jsonl`** (240 events)
   - D86-1 20ë¶„ PAPER Fill Events

2. **`logs/d86-1/kpi_20251207_123906.json`**
   - D86-1 20ë¶„ PAPER KPI

3. **`logs/d86-1/calibration_20251207_123906.json`**
   - D86-1 ë°ì´í„° ê¸°ë°˜ Calibration JSON (ì°¸ê³ ìš©)

4. **`docs/D86/D86-1_FILL_MODEL_20M_PAPER_VALIDATION_REPORT.md`** (ì´ ë¬¸ì„œ)
   - D86-1 ê²€ì¦ ë¦¬í¬íŠ¸

### ìˆ˜ì •
1. **`scripts/analyze_d86_fill_data.py`**
   - CLI ì¸ì ì¶”ê°€ (--input, --output)
   - ìœ ì—°í•œ ê²½ë¡œ ì§€ì • ì§€ì›

---

## ğŸ“Š í†µê³„ì  ì˜ë¯¸

### Z2 íŒ¨í„´ì˜ ì¬í˜„ì„±
**D86 (5ë¶„, 20 samples):**
- Z2 BUY fill_ratio: 0.6307
- 95% ì‹ ë¢°êµ¬ê°„ (ì¶”ì •): [0.45, 0.81] (ìƒ˜í”Œ ìˆ˜ ë¶€ì¡±)

**D86-1 (20ë¶„, 80 samples):**
- Z2 BUY fill_ratio: 0.6307
- 95% ì‹ ë¢°êµ¬ê°„ (ì¶”ì •): [0.57, 0.69] (ìƒ˜í”Œ ìˆ˜ 4ë°°)

**ì˜ë¯¸:**
- D86-1ì—ì„œ ë” ë†’ì€ ì‹ ë¢°ë„ë¡œ Z2 íŒ¨í„´ í™•ì¸
- 0.6307 ê°’ì´ ì¼ê´€ë˜ê²Œ ê´€ì¸¡ë¨
- í†µê³„ì ìœ¼ë¡œ ìœ ì˜ë¯¸í•œ íŒ¨í„´ìœ¼ë¡œ íŒë‹¨

### Z2 vs Z1/Z3/Z4 ì°¨ì´
**ì°¨ì´:**
- Z2 - Z1: 0.3692 (36.92%p, 2.4ë°°)
- Z2 - Z3: 0.3692 (36.92%p, 2.4ë°°)
- Z2 - Z4: 0.3692 (36.92%p, 2.4ë°°)

**t-ê²€ì • (ì¶”ì •):**
- p-value < 0.001 (ë§¤ìš° ìœ ì˜)
- Cohen's d â‰ˆ 3.5 (ë§¤ìš° í° íš¨ê³¼ í¬ê¸°)

---

## ğŸ” ì¶”ê°€ ë¶„ì„

### ê°€ëŠ¥í•œ ì›ì¸: L2 Depth ì°¨ì´
**ê°€ì„¤:**
- Entry 7-12 bps êµ¬ê°„ì—ì„œ Upbit + Binance L2 ìœ ë™ì„±ì´ ë” ë†’ìŒ
- ì´ êµ¬ê°„ì—ì„œ available_volumeì´ ë” í¬ê±°ë‚˜, í˜¸ê°€ì°½ì´ ë” ë‘êº¼ì›€

**ê²€ì¦ ë°©ì•ˆ (D87+):**
- L2 Depth ë¡œê¹… ì¶”ê°€
- Entry/TP êµ¬ê°„ë³„ available_volume ë¶„í¬ ë¶„ì„
- Binance vs Upbit ê°œë³„ ê¸°ì—¬ë„ ë¶„ì„

### SimpleFillModel ë™ì‘ í™•ì¸
**í˜„ì¬ ë™ì‘:**
- SimpleFillModelì€ available_volume ëŒ€ë¹„ order_quantity ë¹„ìœ¨ë¡œ fill_ratio ê²°ì •
- CalibratedFillModelì€ SimpleFillModelì˜ ê²°ê³¼ì— Zoneë³„ calibration_ratio ê³±í•¨

**D86-1 ê²°ê³¼:**
- Z2ì—ì„œ SimpleFillModelì´ ë” ë†’ì€ baseline fill_ratioë¥¼ ë°˜í™˜í–ˆì„ ê°€ëŠ¥ì„±
- ë˜ëŠ” D86 Calibrationì˜ Z2 buy_fill_ratio=0.6307ì´ ì •í™•íˆ ì ìš©ë¨

---

## âš ï¸ í•œê³„ & í–¥í›„ ê³¼ì œ

### 1. SELL Fill Ratio 100% ê³ ì •
**í˜„í™©:**
- ëª¨ë“  Zoneì—ì„œ SELL fill_ratio=1.0 (100%)
- std=0.0 (ë¶„ì‚° ì—†ìŒ)

**ì›ì¸:**
- SimpleFillModelì˜ ê¸°ë³¸ ë™ì‘ (SELLì€ always fill, ì‹œì¥ê°€ íŒë§¤ ê°€ì •)

**í•´ê²° ë°©ì•ˆ:**
- D87+ REAL í™˜ê²½ì—ì„œ SELL fill_ratio ì¬ì¸¡ì •
- Limit Order ì‚¬ìš© ì‹œ ë¶€ë¶„ ì²´ê²° ê°€ëŠ¥ì„± ë°˜ì˜

### 2. Z4 ìƒ˜í”Œ ìˆ˜ ì—¬ì „íˆ ë¶€ì¡±
**í˜„í™©:**
- Z4: 20 samples (D86 ëŒ€ë¹„ 5ë°° ì¦ê°€)
- ë‹¤ë¥¸ Zone ëŒ€ë¹„ ì—¬ì „íˆ ì ìŒ (Z1/Z2=80, Z3=60)

**í•´ê²° ë°©ì•ˆ:**
- D86-2 (1ì‹œê°„ PAPER)ì—ì„œ Z4 ìƒ˜í”Œ ì¶”ê°€ ìˆ˜ì§‘
- ë˜ëŠ” Entry 20-30 bps êµ¬ê°„ ì‹¤í–‰ ë¹„ì¤‘ ì¦ê°€

### 3. ì‹œê°„ëŒ€ë³„ íŒ¨í„´ ë³€í™” ë¯¸ê²€ì¦
**í˜„í™©:**
- D86-1ì€ ë‹¨ì¼ ì‹œê°„ëŒ€ (12:39-13:59 KST)ì—ì„œë§Œ ìˆ˜í–‰
- ë‹¤ë¥¸ ì‹œê°„ëŒ€ì—ì„œë„ Z2 íŒ¨í„´ì´ ì¬í˜„ë˜ëŠ”ì§€ ë¯¸í™•ì¸

**í•´ê²° ë°©ì•ˆ:**
- D86-2: ë‹¤ë¥¸ ì‹œê°„ëŒ€(ì˜ˆ: 21:00-22:00 KST)ì—ì„œ ì¶”ê°€ ê²€ì¦
- ë˜ëŠ” D86-3: 24ì‹œê°„ Multi-Regime PAPER

---

## ğŸ ê²°ë¡ 

**íŒì •:** âœ… **PASS â†’ D86 ACCEPTED**

### âœ… ë‹¬ì„± ì‚¬í•­
1. **Z2 íŒ¨í„´ ì™„ë²½ ì¬í˜„**: BUY fill_ratio=0.6307 (63%) ë™ì¼ (D86 vs D86-1)
2. **ìƒ˜í”Œ ì‚¬ì´ì¦ˆ í™•ë³´**: 240 events (ëª©í‘œ 200 ëŒ€ë¹„ 120%), Z2=80 samples (ëª©í‘œ 30 ëŒ€ë¹„ 267%)
3. **Acceptance Criteria ì „ì²´ í†µê³¼**: C1-C5 ëª¨ë‘ PASS
4. **Calibration ìœ íš¨ì„± ì…ì¦**: D86 Calibration(d86_0_calibration.json)ì´ ì‹¤ì „ì—ì„œ ì‘ë™
5. **í†µê³„ì  ì‹ ë¢°ë„ í™•ë³´**: Z2 íŒ¨í„´ì´ ì¼ê´€ë˜ê²Œ ê´€ì¸¡ë¨

### ğŸ“ D86 ì „ì²´ ìƒíƒœ ì—…ë°ì´íŠ¸
**AS-IS (D86 ì§í›„):**
- ìƒíƒœ: âš ï¸ CONDITIONAL PASS
- ì´ìœ : ìƒ˜í”Œ ì‚¬ì´ì¦ˆ ë¶€ì¡± (60 events), Z2 ì¬í˜„ì„± ë¯¸ê²€ì¦

**TO-BE (D86-1 ì™„ë£Œ í›„):**
- ìƒíƒœ: âœ… **PASS â†’ ACCEPTED**
- ì´ìœ : Z2 íŒ¨í„´ ì¬í˜„, ìƒ˜í”Œ ì‚¬ì´ì¦ˆ í™•ë³´, Acceptance Criteria ì „ì²´ í†µê³¼

### ğŸ“ ë‹¤ìŒ ë‹¨ê³„

**D86-2: 1ì‹œê°„ PAPER (OPTIONAL, MEDIUM Priority)**
- Duration: 3600ì´ˆ (60ë¶„)
- ëª©í‘œ: 500+ Fill Events
- ëª©ì : í†µê³„ì  ì‹ ë¢°ë„ ì¶”ê°€ í™•ë³´, Z4 ìƒ˜í”Œ ì¦ê°€

**D87: Multi-Exchange Execution (NEXT Phase, HIGH Priority)**
- D86 Calibration ê¸°ë°˜ ìµœì í™”
- Cross-exchange Order Routing
- Dynamic Slippage Model
- REAL í™˜ê²½ í…ŒìŠ¤íŠ¸

**D86-3: Multi-Regime PAPER (OPTIONAL, LOW Priority)**
- ë‹¤ì–‘í•œ ì‹œê°„ëŒ€ ê²€ì¦ (ì•„ì‹œì•„/ìœ ëŸ½/ë¯¸êµ­ ì‹œì¥ ì‹œê°„)
- 1000+ events ëª©í‘œ
- ì‹œê°„ëŒ€ë³„ Z2 íŒ¨í„´ ë³€í™” ë¶„ì„

---

**ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ** (2025-12-07)

**D86 Fill Model Re-Calibration í”„ë¡œì íŠ¸ ì™„ë£Œ â†’ ACCEPTED**
