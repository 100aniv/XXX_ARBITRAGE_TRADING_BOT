# D51 Long-run Debug Checklist

**작성일:** 2025-11-17  
**상태:** ✅ 템플릿 정의 완료

---

## 📋 롱런 후 점검 체크리스트

롱런 완료 후 **이 체크리스트를 순서대로 확인**하여 시스템 안정성을 검증합니다.

---

## 🔍 1단계: 실행 환경 확인

### 1.1 기본 정보 기록

- [ ] **시작 시간:** `YYYY-MM-DD HH:MM:SS`
- [ ] **종료 시간:** `YYYY-MM-DD HH:MM:SS`
- [ ] **예상 실행 시간:** `X시간 Y분`
- [ ] **실제 실행 시간:** `X시간 Y분`
- [ ] **시나리오:** S1 / S2 / S3
- [ ] **Config 파일:** `configs/live/...`

### 1.2 머신 정보

- [ ] **OS:** Windows / Linux / macOS
- [ ] **CPU:** `X cores, Y GHz`
- [ ] **메모리:** `X GB`
- [ ] **디스크 여유:** `X GB`
- [ ] **Python 버전:** `X.Y.Z`

### 1.3 네트워크 상태

- [ ] **인터넷 연결:** 안정적 / 불안정 / 끊김 있음
- [ ] **평균 지연:** `X ms`
- [ ] **패킷 손실:** `0% / X%`
- [ ] **DNS 문제:** 없음 / 있음

### 1.4 시스템 부하

- [ ] **CPU 사용률:** 평균 `X%`, 최대 `Y%`
- [ ] **메모리 사용률:** 평균 `X%`, 최대 `Y%`
- [ ] **디스크 I/O:** 정상 / 높음
- [ ] **다른 프로세스:** 없음 / 있음 (리스트: ...)

---

## 📊 2단계: 메트릭 수집 확인

### 2.1 로그 파일 확인

- [ ] **로그 파일 생성:** 있음 / 없음
- [ ] **로그 파일 경로:** `logs/...`
- [ ] **로그 파일 크기:** `X MB`
- [ ] **로그 라인 수:** `X 줄`

### 2.2 메트릭 데이터 확인

- [ ] **MetricsCollector 초기화:** 성공 / 실패
- [ ] **메트릭 수집 시작:** 확인됨 / 미확인
- [ ] **메트릭 수집 종료:** 확인됨 / 미확인
- [ ] **메트릭 데이터 완전성:** `X% 완료`

### 2.3 MetricsServer 상태

- [ ] **MetricsServer 시작:** 성공 / 실패 / 스킵
- [ ] **포트:** `8001` (또는 설정값)
- [ ] **/health 엔드포인트:** 응답 / 미응답
- [ ] **/metrics 엔드포인트:** 응답 / 미응답

---

## 📈 3단계: 성능 분석

### 3.1 루프 시간 분석

**메트릭:**
```
평균 루프 시간: X ms
최대 루프 시간: Y ms
최소 루프 시간: Z ms
표준 편차: W ms
```

**확인 항목:**
- [ ] 평균 < 1500ms: ✅ / ❌
- [ ] 최대 < 3000ms: ✅ / ❌
- [ ] 표준 편차 < 500ms: ✅ / ❌
- [ ] 증가 추세 없음: ✅ / ❌

**분석:**
```
정상 범위: 950~1050ms (±5%)
관찰 범위: X~Y ms (±Z%)
평가: [정상 / 주의 / 경고]
```

### 3.2 루프 시간 추이 (시간대별)

**시간대별 평균 루프 시간:**
```
00:00~01:00: X ms
01:00~02:00: Y ms
...
23:00~24:00: Z ms
```

**확인 항목:**
- [ ] 시간대별 변화 < 20%: ✅ / ❌
- [ ] 특정 시간대 급락 없음: ✅ / ❌
- [ ] 선형 증가 추세 없음: ✅ / ❌

**분석:**
```
최고 시간대: X시간 (Y ms)
최저 시간대: Z시간 (W ms)
변화율: (Y-W)/W * 100 = P%
평가: [정상 / 주의 / 경고]
```

### 3.3 메모리 사용량 분석

**메트릭:**
```
초기 메모리: X MB
최종 메모리: Y MB
증가량: Z MB
증가율: P%
```

**확인 항목:**
- [ ] 증가량 < 100MB (S1): ✅ / ❌
- [ ] 증가량 < 200MB (S2): ✅ / ❌
- [ ] 증가량 < 500MB (S3): ✅ / ❌
- [ ] 선형 증가 추세 없음: ✅ / ❌

**분석:**
```
메모리 누수 여부: [없음 / 의심 / 있음]
원인 추정: ...
권장 조치: ...
```

---

## ✅ 4단계: 기능 검증

### 4.1 체결 신호 검증

**메트릭:**
```
총 체결 수: X 회
체결 빈도: Y 회/시간
최근 체결 시간: YYYY-MM-DD HH:MM:SS
```

**확인 항목:**
- [ ] 최소 체결 수 달성 (S1: ≥1, S2: ≥10, S3: ≥50): ✅ / ❌
- [ ] 체결 신호 생성 정상: ✅ / ❌
- [ ] 체결 간격 안정적: ✅ / ❌

**분석:**
```
기대 체결 수: X 회
실제 체결 수: Y 회
달성율: Y/X * 100 = P%
평가: [정상 / 주의 / 경고]
```

### 4.2 Guard 동작 검증

**메트릭:**
```
Trade Rejected: X 회
Session Stop: Y 회
Daily Loss: Z USD
```

**확인 항목:**
- [ ] Trade Rejected 정상 범위 (< 10회): ✅ / ❌
- [ ] Session Stop 없음: ✅ / ❌
- [ ] Daily Loss = 0 USD (Paper 모드): ✅ / ❌

**분석:**
```
Guard 발동 사유: ...
정상 여부: [정상 / 비정상]
권장 조치: ...
```

### 4.3 스냅샷 생성 검증

**메트릭:**
```
총 루프 수: X 회
스냅샷 성공: Y 회
스냅샷 None: Z 회
스냅샷 실패율: Z/X * 100 = P%
```

**확인 항목:**
- [ ] 스냅샷 실패율 < 1% (S1): ✅ / ❌
- [ ] 스냅샷 실패율 < 3% (S2): ✅ / ❌
- [ ] 스냅샷 실패율 < 5% (S3): ✅ / ❌

**분석:**
```
실패 원인: [REST API 오류 / 데이터 파싱 오류 / 기타]
재발 가능성: [낮음 / 중간 / 높음]
권장 조치: ...
```

---

## 🐛 5단계: 버그/이상 징후 분석

### 5.1 에러 로그 분석

**에러 로그 수집:**
```
총 에러 로그: X 개
에러 유형별 분류:
  - HTTP 4xx: A 개
  - HTTP 5xx: B 개
  - Parsing Error: C 개
  - Logic Error: D 개
  - 기타: E 개
```

**확인 항목:**
- [ ] 에러 로그 < 10개 (S1): ✅ / ❌
- [ ] 에러 로그 < 50개 (S2): ✅ / ❌
- [ ] 에러 로그 < 200개 (S3): ✅ / ❌
- [ ] 반복되는 에러 패턴 없음: ✅ / ❌

**분석:**
```
주요 에러: ...
에러 발생 시간: ...
에러 발생 빈도: ...
원인 분석: ...
권장 조치: ...
```

### 5.2 경고 로그 분석

**경고 로그 수집:**
```
총 경고 로그: X 개
경고 유형별 분류:
  - 스냅샷 None: A 개
  - Guard 거부: B 개
  - 느린 루프: C 개
  - 기타: D 개
```

**확인 항목:**
- [ ] 경고 로그 < 5개 (S1): ✅ / ❌
- [ ] 경고 로그 < 20개 (S2): ✅ / ❌
- [ ] 경고 로그 < 100개 (S3): ✅ / ❌

**분석:**
```
주요 경고: ...
경고 발생 시간: ...
경고 발생 빈도: ...
원인 분석: ...
권장 조치: ...
```

### 5.3 비정상 패턴 탐지

**자동 탐지 항목:**
- [ ] 루프 시간 폭주 (> 2000ms): 없음 / 있음 (횟수: X)
- [ ] 연속 스냅샷 None (> 5회): 없음 / 있음 (구간: ...)
- [ ] 체결 신호 부재 (> 1시간): 없음 / 있음 (구간: ...)
- [ ] Guard 과다발동 (> 10회): 없음 / 있음 (사유: ...)
- [ ] 메모리 급증 (> 100MB/시간): 없음 / 있음 (시간: ...)

**분석:**
```
비정상 패턴 수: X 개
심각도: [낮음 / 중간 / 높음]
원인 추정: ...
권장 조치: ...
```

---

## 📝 6단계: 최종 평가

### 6.1 종합 평가

**평가 항목:**
- [ ] 성능: [정상 / 주의 / 경고]
- [ ] 안정성: [정상 / 주의 / 경고]
- [ ] 기능: [정상 / 주의 / 경고]
- [ ] 버그/이상: [없음 / 있음]

**종합 평가:**
```
[✅ 정상 / ⚠️ 주의 / ❌ 경고]
```

### 6.2 버그 발견 시 기록

**버그 템플릿:**
```
버그 ID: D51_BUG_001
발견 시간: YYYY-MM-DD HH:MM:SS
시나리오: S1 / S2 / S3
심각도: [낮음 / 중간 / 높음]

증상:
- ...

재현 방법:
1. ...
2. ...

로그:
```
[ERROR] ...
```

원인 추정:
- ...

권장 조치:
- ...

관련 파일:
- ...
```

### 6.3 권장 조치

**우선순위별 조치:**

**[높음] 즉시 조치 필요:**
- [ ] 항목 1: ...
- [ ] 항목 2: ...

**[중간] 다음 버전에서 개선:**
- [ ] 항목 1: ...
- [ ] 항목 2: ...

**[낮음] 향후 모니터링:**
- [ ] 항목 1: ...
- [ ] 항목 2: ...

---

## 📊 최종 체크리스트

**롱런 완료 후 필수 확인:**
- [ ] 모든 메트릭 수집 완료
- [ ] 로그 파일 저장
- [ ] 성능 분석 완료
- [ ] 버그/이상 징후 기록
- [ ] 최종 평가 작성
- [ ] 결과 리포트 생성

**다음 단계:**
- [ ] 버그 수정 (필요 시)
- [ ] 다음 시나리오 실행 (필요 시)
- [ ] 최종 보고서 작성

---

**D51 Long-run Debug Checklist 정의 완료.** ✅

**작성자:** Cascade AI  
**작성일:** 2025-11-17  
**상태:** ✅ 템플릿 정의 완료
