# D51 Paper Long-run Test Plan

**ì‘ì„±ì¼:** 2025-11-17  
**ìƒíƒœ:** âœ… ì •ì˜ ì™„ë£Œ

---

## ğŸ“‹ Executive Summary

D51ì€ **Paper ëª¨ë“œ ë¡±ëŸ° í…ŒìŠ¤íŠ¸ í”Œëœ**ì„ ì •ì‹ìœ¼ë¡œ ì •ì˜í•˜ê³ , **ì‹¤í–‰ ê¸°ë°˜**ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

**3ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤:**
- **S1 (1ì‹œê°„ ë¯¸ë‹ˆ ë¡±ëŸ°):** ê°œë°œÂ·ë²„ê·¸ ì¬í˜„ìš©
- **S2 (6ì‹œê°„ ì¤‘ê¸° ë¡±ëŸ°):** ì•¼ê°„ í…ŒìŠ¤íŠ¸ìš©
- **S3 (24ì‹œê°„ ë¡±ëŸ°):** ì‹¤ì œ "ì¤€-ìš´ì˜" ê²€ì¦ìš©

---

## ğŸ¯ ëª©í‘œ

1. **ì‹œìŠ¤í…œ ì•ˆì •ì„± ê²€ì¦**
   - ë£¨í”„ ì‹œê°„ ì•ˆì •ì„± (í‰ê· , ë¶„ì‚°, ìµœëŒ€ê°’)
   - ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì˜¤ë²„í—¤ë“œ í™•ì¸
   - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—¬ë¶€

2. **ë²„ê·¸/ì´ìƒ ì§•í›„ íƒì§€**
   - ìŠ¤ëƒ…ìƒ· None ë°œìƒ íŒ¨í„´
   - Guard ê³¼ë‹¤ë°œë™ ì—¬ë¶€
   - ì²´ê²° ì‹ í˜¸ ì´ìƒ (0ì— ê°€ê¹Œìš´ ìƒíƒœ ì§€ì†)
   - REST API í˜¸ì¶œ ì‹¤íŒ¨ íŒ¨í„´

3. **ì„±ëŠ¥ ê¸°ì¤€ì„  í™•ë¦½**
   - ì •ìƒ ë£¨í”„ ì‹œê°„ ë²”ìœ„
   - ì •ìƒ ìŠ¤í”„ë ˆë“œ ë¶„í¬
   - ì •ìƒ ì²´ê²° ë¹ˆë„

---

## ğŸ“Š ì‹œë‚˜ë¦¬ì˜¤ ì •ì˜

### S1: 1ì‹œê°„ ë¯¸ë‹ˆ ë¡±ëŸ° (ê°œë°œÂ·ë²„ê·¸ ì¬í˜„ìš©)

**ëª©ì :**
- ë¹ ë¥¸ í”¼ë“œë°± ë£¨í”„ (ê°œë°œ ì¤‘ ë²„ê·¸ ì¬í˜„)
- ê°„ë‹¨í•œ ì´ìƒ ì§•í›„ íƒì§€

**ì…ë ¥:**
```yaml
config: configs/live/arbitrage_live_paper_example.yaml
data_source: "rest"  # ê°•ì œ
duration: 60 ë¶„
mode: "paper"
```

**í™˜ê²½:**
- ê°œë°œ ë¨¸ì‹  (ë¡œì»¬)
- ë„¤íŠ¸ì›Œí¬: ì•ˆì •ì  (LAN)
- ë¶€í•˜: ë‚®ìŒ (ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ ìµœì†Œ)

**ê´€ì°° ë©”íŠ¸ë¦­:**
- ë£¨í”„ ì‹œê°„: í‰ê·  Â±10% ë²”ìœ„ ë‚´
- ìŠ¤ëƒ…ìƒ· None: 0íšŒ
- Guard ë°œë™: ì •ìƒ ë²”ìœ„ (ì˜ˆ: 0~2íšŒ)
- ì²´ê²° ì‹ í˜¸: ìµœì†Œ 1íšŒ ì´ìƒ

**í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ê¸°ì¤€:**
- ë£¨í”„ ì‹œê°„ í‰ê·  > 1500ms
- ìŠ¤ëƒ…ìƒ· None > 5íšŒ
- Guard SESSION_STOP ë°œë™
- ì—ëŸ¬ ë¡œê·¸ > 10ê°œ

**ì˜ˆìƒ ê²°ê³¼:**
```
Duration: 60.0s
Loops: 60
Trades Opened: 2~5
Avg Loop Time: 1000Â±100ms
Errors: 0
```

---

### S2: 6ì‹œê°„ ì¤‘ê¸° ë¡±ëŸ° (ì•¼ê°„ í…ŒìŠ¤íŠ¸ìš©)

**ëª©ì :**
- ì¥ì‹œê°„ ì•ˆì •ì„± ê²€ì¦
- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ íƒì§€
- ì‹œê°„ëŒ€ë³„ ì„±ëŠ¥ ë³€í™” ê´€ì°°

**ì…ë ¥:**
```yaml
config: configs/live/arbitrage_live_paper_example.yaml
data_source: "rest"  # ê°•ì œ
duration: 360 ë¶„ (6ì‹œê°„)
mode: "paper"
```

**í™˜ê²½:**
- ê°œë°œ/í…ŒìŠ¤íŠ¸ ì„œë²„
- ë„¤íŠ¸ì›Œí¬: ì•ˆì •ì 
- ë¶€í•˜: ì¤‘ê°„ (ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ ë³‘í–‰ ê°€ëŠ¥)

**ê´€ì°° ë©”íŠ¸ë¦­:**
- ë£¨í”„ ì‹œê°„: í‰ê·  Â±15% ë²”ìœ„ ë‚´ (ì‹œê°„ëŒ€ë³„ ë³€í™” ì¶”ì )
- ìŠ¤ëƒ…ìƒ· None: 0~10íšŒ
- Guard ë°œë™: ì •ìƒ ë²”ìœ„ (ì˜ˆ: 0~5íšŒ)
- ì²´ê²° ì‹ í˜¸: ìµœì†Œ 10íšŒ ì´ìƒ
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ì„ í˜• ì¦ê°€ ì—†ìŒ

**í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ê¸°ì¤€:**
- ë£¨í”„ ì‹œê°„ í‰ê·  > 1500ms ë˜ëŠ” ì¦ê°€ ì¶”ì„¸
- ìŠ¤ëƒ…ìƒ· None > 50íšŒ
- Guard SESSION_STOP ë°œë™
- ì—ëŸ¬ ë¡œê·¸ > 50ê°œ
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ > 500MB ì¦ê°€

**ì˜ˆìƒ ê²°ê³¼:**
```
Duration: 360.0s
Loops: 360
Trades Opened: 10~20
Avg Loop Time: 1000Â±150ms
Errors: 0~5
Memory Delta: < 100MB
```

---

### S3: 24ì‹œê°„ ë¡±ëŸ° (ì‹¤ì œ "ì¤€-ìš´ì˜" ê²€ì¦ìš©)

**ëª©ì :**
- ì‹¤ì œ ìš´ì˜ í™˜ê²½ ì‹œë®¬ë ˆì´ì…˜
- ì¥ì‹œê°„ ì•ˆì •ì„± ìµœì¢… ê²€ì¦
- ì¼ì¼ ì‚¬ì´í´ ì„±ëŠ¥ ë³€í™” ê´€ì°°

**ì…ë ¥:**
```yaml
config: configs/live/arbitrage_live_paper_example.yaml
data_source: "rest"  # ê°•ì œ
duration: 1440 ë¶„ (24ì‹œê°„)
mode: "paper"
```

**í™˜ê²½:**
- ìš´ì˜ ì„œë²„ (ë˜ëŠ” ìš´ì˜ í™˜ê²½ ì‹œë®¬ë ˆì´ì…˜)
- ë„¤íŠ¸ì›Œí¬: ì•ˆì •ì  (ë˜ëŠ” ê°„í—ì  ì§€ì—° ì‹œë®¬ë ˆì´ì…˜)
- ë¶€í•˜: ì¤‘ê°„~ë†’ìŒ

**ê´€ì°° ë©”íŠ¸ë¦­:**
- ë£¨í”„ ì‹œê°„: í‰ê·  Â±20% ë²”ìœ„ ë‚´ (ì‹œê°„ëŒ€ë³„ ë³€í™” ì¶”ì )
- ìŠ¤ëƒ…ìƒ· None: 0~50íšŒ
- Guard ë°œë™: ì •ìƒ ë²”ìœ„ (ì˜ˆ: 0~10íšŒ)
- ì²´ê²° ì‹ í˜¸: ìµœì†Œ 50íšŒ ì´ìƒ
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ì„ í˜• ì¦ê°€ ì—†ìŒ
- ì¼ì¼ ì‚¬ì´í´: ì‹œê°„ëŒ€ë³„ ì„±ëŠ¥ ë³€í™” íŒ¨í„´ ë¶„ì„

**í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ê¸°ì¤€:**
- ë£¨í”„ ì‹œê°„ í‰ê·  > 1500ms ë˜ëŠ” ì¦ê°€ ì¶”ì„¸
- ìŠ¤ëƒ…ìƒ· None > 200íšŒ
- Guard SESSION_STOP ë°œë™
- ì—ëŸ¬ ë¡œê·¸ > 200ê°œ
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ > 500MB ì¦ê°€
- íŠ¹ì • ì‹œê°„ëŒ€ ì„±ëŠ¥ ê¸‰ë½ (ì˜ˆ: ë£¨í”„ ì‹œê°„ > 3000ms)

**ì˜ˆìƒ ê²°ê³¼:**
```
Duration: 1440.0s
Loops: 1440
Trades Opened: 50~100
Avg Loop Time: 1000Â±200ms
Errors: 0~20
Memory Delta: < 200MB
Hourly Pattern: ì•ˆì •ì 
```

---

## ğŸ” ê´€ì°°í•  ë©”íŠ¸ë¦­/ë¡œê·¸ í•­ëª©

### 1. ë£¨í”„ ì‹œê°„ (Loop Time)

**ë©”íŠ¸ë¦­:**
- `loop_time_ms`: ê° ë£¨í”„ ì‹¤í–‰ ì‹œê°„
- `loop_time_avg_ms`: í‰ê·  ë£¨í”„ ì‹œê°„
- `loop_time_max_ms`: ìµœëŒ€ ë£¨í”„ ì‹œê°„
- `loop_time_min_ms`: ìµœì†Œ ë£¨í”„ ì‹œê°„

**ì •ìƒ ë²”ìœ„:**
- í‰ê· : 950~1050ms (1ì´ˆ Â±5%)
- ìµœëŒ€: < 2000ms
- ë¶„ì‚°: < 200ms

**ì´ìƒ ì§•í›„:**
- í‰ê·  > 1500ms (ë£¨í”„ ì‹œê°„ í­ì£¼)
- ìµœëŒ€ > 3000ms (ê°„í—ì  ì§€ì—°)
- ë¶„ì‚° > 500ms (ë¶ˆì•ˆì •)

---

### 2. ìŠ¤ëƒ…ìƒ· ìƒíƒœ (Snapshot Status)

**ë©”íŠ¸ë¦­:**
- `snapshot_none_count`: None ë°˜í™˜ íšŸìˆ˜
- `snapshot_invalid_count`: ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„° íšŸìˆ˜

**ì •ìƒ ë²”ìœ„:**
- None: 0íšŒ (ë˜ëŠ” ë§¤ìš° ë“œë¬¼ê²Œ)
- Invalid: 0íšŒ

**ì´ìƒ ì§•í›„:**
- None > 10íšŒ (REST API í˜¸ì¶œ ì‹¤íŒ¨ íŒ¨í„´)
- Invalid > 5íšŒ (ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜)

---

### 3. ì²´ê²° ì‹ í˜¸ (Trades Opened)

**ë©”íŠ¸ë¦­:**
- `trades_opened_total`: ëˆ„ì  ì²´ê²° ìˆ˜
- `trades_opened_recent`: ìµœê·¼ 1ë¶„ ì²´ê²° ìˆ˜
- `trades_opened_rate`: ì²´ê²° ë¹ˆë„ (íšŒ/ì‹œê°„)

**ì •ìƒ ë²”ìœ„:**
- 1ì‹œê°„: 2~5íšŒ
- 6ì‹œê°„: 10~20íšŒ
- 24ì‹œê°„: 50~100íšŒ

**ì´ìƒ ì§•í›„:**
- 1ì‹œê°„ ì´ìƒ 0íšŒ (ì‹ í˜¸ ìƒì„± ë¶ˆê°€)
- ê¸‰ê²©í•œ ì¦ê°€ (> 10íšŒ/ì‹œê°„)

---

### 4. Guard ë°œë™ (Risk Guard Events)

**ë©”íŠ¸ë¦­:**
- `guard_trade_rejected_count`: ê±°ë˜ ê±°ë¶€ íšŸìˆ˜
- `guard_session_stop_count`: ì„¸ì…˜ ì¤‘ì§€ íšŸìˆ˜
- `guard_daily_loss_usd`: ëˆ„ì  ì†ì‹¤

**ì •ìƒ ë²”ìœ„:**
- Trade Rejected: 0~5íšŒ (ì •ìƒ)
- Session Stop: 0íšŒ (ì •ìƒ)
- Daily Loss: 0 USD (Paper ëª¨ë“œ)

**ì´ìƒ ì§•í›„:**
- Trade Rejected > 10íšŒ (ê³¼ë‹¤ ê±°ë¶€)
- Session Stop > 0íšŒ (ì†ì‹¤ í•œë„ ë„ë‹¬)

---

### 5. ì—ëŸ¬ ë¡œê·¸ (Error Logs)

**ì¶”ì  í•­ëª©:**
- `[ERROR]` ë¡œê·¸ ê°œìˆ˜
- `[WARNING]` ë¡œê·¸ ê°œìˆ˜
- ì—ëŸ¬ ìœ í˜• ë¶„ë¥˜ (HTTP, Parsing, Logic ë“±)

**ì •ìƒ ë²”ìœ„:**
- ERROR: 0ê°œ
- WARNING: 0~5ê°œ

**ì´ìƒ ì§•í›„:**
- ERROR > 10ê°œ
- WARNING > 20ê°œ

---

## ğŸ“‹ ë¡±ëŸ° í›„ ì ê²€ í•­ëª©

### 1. ì‹¤í–‰ í™˜ê²½ í™•ì¸
- [ ] ì‹œì‘ ì‹œê°„ / ì¢…ë£Œ ì‹œê°„ ê¸°ë¡
- [ ] ì‹¤í–‰ ë¨¸ì‹  ì •ë³´ (CPU, ë©”ëª¨ë¦¬, OS)
- [ ] ë„¤íŠ¸ì›Œí¬ ìƒíƒœ (ì§€ì—°, íŒ¨í‚· ì†ì‹¤)
- [ ] ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ ë¶€í•˜ ì—¬ë¶€

### 2. ë©”íŠ¸ë¦­ ìˆ˜ì§‘ í™•ì¸
- [ ] MetricsCollector ì •ìƒ ë™ì‘
- [ ] ë¡œê·¸ íŒŒì¼ ìƒì„± ì—¬ë¶€
- [ ] ë©”íŠ¸ë¦­ ë°ì´í„° ì™„ì „ì„±

### 3. ì„±ëŠ¥ ë¶„ì„
- [ ] ë£¨í”„ ì‹œê°„ ë¶„í¬ (í‰ê· , ìµœëŒ€, ë¶„ì‚°)
- [ ] ë£¨í”„ ì‹œê°„ ì¶”ì´ (ì‹œê°„ëŒ€ë³„ ë³€í™”)
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¶”ì´

### 4. ê¸°ëŠ¥ ê²€ì¦
- [ ] ì²´ê²° ì‹ í˜¸ ìƒì„± ì—¬ë¶€
- [ ] Guard ì •ìƒ ë™ì‘
- [ ] ìŠ¤ëƒ…ìƒ· ìƒì„± ì•ˆì •ì„±

### 5. ë²„ê·¸/ì´ìƒ ì§•í›„
- [ ] ì—ëŸ¬ ë¡œê·¸ ë¶„ì„
- [ ] ê²½ê³  ë¡œê·¸ ë¶„ì„
- [ ] ë¹„ì •ìƒ íŒ¨í„´ íƒì§€

---

## ğŸ› ï¸ ì‹¤í–‰ ë°©ë²•

### S1 (1ì‹œê°„ ë¯¸ë‹ˆ ë¡±ëŸ°)

```bash
python -m scripts.run_paper_longrun \
  --config configs/live/arbitrage_live_paper_example.yaml \
  --scenario S1 \
  --duration-minutes 60
```

**ì˜ˆìƒ ì‹¤í–‰ ì‹œê°„:** 1ë¶„ (ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ)

### S2 (6ì‹œê°„ ì¤‘ê¸° ë¡±ëŸ°)

```bash
python -m scripts.run_paper_longrun \
  --config configs/live/arbitrage_live_paper_example.yaml \
  --scenario S2 \
  --duration-minutes 360
```

**ì˜ˆìƒ ì‹¤í–‰ ì‹œê°„:** 6ë¶„ (ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ)

### S3 (24ì‹œê°„ ë¡±ëŸ°)

```bash
python -m scripts.run_paper_longrun \
  --config configs/live/arbitrage_live_paper_example.yaml \
  --scenario S3 \
  --duration-minutes 1440
```

**ì˜ˆìƒ ì‹¤í–‰ ì‹œê°„:** 24ë¶„ (ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ)

---

## ğŸ“Š ê²°ê³¼ ë¶„ì„

### ê²°ê³¼ íŒŒì¼ ìœ„ì¹˜

```
reports/
â”œâ”€â”€ D51_longrun_S1_20251117_233000.txt
â”œâ”€â”€ D51_longrun_S2_20251117_233000.txt
â””â”€â”€ D51_longrun_S3_20251117_233000.txt
```

### ë¶„ì„ ë„êµ¬ ì‚¬ìš©

```bash
python -m arbitrage.monitoring.longrun_analyzer \
  --log-file reports/D51_longrun_S1_20251117_233000.txt \
  --output-report reports/D51_longrun_S1_analysis.txt
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. data_source ê³ ì •

- **ë°˜ë“œì‹œ `data_source="rest"` ì‚¬ìš©**
- WebSocket ëª¨ë“œëŠ” D52 "WS Long-run Validation"ì—ì„œ ë³„ë„ ì •ì˜

### 2. ê¸°ë³¸ê°’ ìœ ì§€

- ì—”ì§„ íŒŒë¼ë¯¸í„° ë³€ê²½ ê¸ˆì§€
- Guard ê·œì¹™ ë³€ê²½ ê¸ˆì§€
- ì „ëµ ë¡œì§ ë³€ê²½ ê¸ˆì§€

### 3. í™˜ê²½ í†µì œ

- ë¡±ëŸ° ì¤‘ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ ìµœì†Œí™”
- ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ì•ˆì •ì  ìœ ì§€
- ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì¶©ë¶„íˆ í™•ë³´

### 4. ê²°ê³¼ ê¸°ë¡

- ëª¨ë“  ë¡±ëŸ° ê²°ê³¼ ì €ì¥
- ì´ìƒ ì§•í›„ ë°œê²¬ ì‹œ ì¦‰ì‹œ ê¸°ë¡
- ë²„ê·¸ ì¬í˜„ ì‹œ config/ë¡œê·¸ ë³´ê´€

---

## ğŸ“ˆ ì„±ê³µ ê¸°ì¤€

### S1 (1ì‹œê°„)
- âœ… ë£¨í”„ ì‹œê°„ í‰ê·  < 1500ms
- âœ… ìŠ¤ëƒ…ìƒ· None = 0íšŒ
- âœ… ì—ëŸ¬ ë¡œê·¸ = 0ê°œ
- âœ… ì²´ê²° ì‹ í˜¸ â‰¥ 1íšŒ

### S2 (6ì‹œê°„)
- âœ… ë£¨í”„ ì‹œê°„ í‰ê·  < 1500ms
- âœ… ë£¨í”„ ì‹œê°„ ì¦ê°€ ì¶”ì„¸ ì—†ìŒ
- âœ… ìŠ¤ëƒ…ìƒ· None < 10íšŒ
- âœ… ì—ëŸ¬ ë¡œê·¸ < 10ê°œ
- âœ… ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ

### S3 (24ì‹œê°„)
- âœ… ë£¨í”„ ì‹œê°„ í‰ê·  < 1500ms
- âœ… ë£¨í”„ ì‹œê°„ ì¦ê°€ ì¶”ì„¸ ì—†ìŒ
- âœ… ìŠ¤ëƒ…ìƒ· None < 50íšŒ
- âœ… ì—ëŸ¬ ë¡œê·¸ < 50ê°œ
- âœ… ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ
- âœ… ì¼ì¼ ì‚¬ì´í´ íŒ¨í„´ ì•ˆì •ì 

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### D52: WS Long-run Validation
- WebSocket ëª¨ë“œ ë¡±ëŸ° í…ŒìŠ¤íŠ¸
- ì¬ì—°ê²° ì •ì±… ê²€ì¦
- ë©”ì‹œì§€ ì†ì‹¤ ì²˜ë¦¬

### D53: Performance Tuning
- ë£¨í”„ ì‹œê°„ ìµœì í™”
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
- ì²´ê²° ì‹ í˜¸ ê°œì„ 

---

**D51 Paper Long-run Test Plan ì •ì˜ ì™„ë£Œ.** âœ…

**ì‘ì„±ì:** Cascade AI  
**ì‘ì„±ì¼:** 2025-11-17  
**ìƒíƒœ:** âœ… ì •ì˜ ì™„ë£Œ
